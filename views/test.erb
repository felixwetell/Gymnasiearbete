<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<form name="add_message" method="POST" action="/add_message">
  <input name="message"/>
  <input type="submit"/>
</form>

<script>
    function createTable(tableData) {
        var table = document.createElement('table')
                , tableBody = document.createElement('tbody');

        tableData.forEach(function(rowData) {
            var row = document.createElement('tr');

            rowData.forEach(function(cellData) {
                var cell = document.createElement('td');
                cell.appendChild(document.createTextNode(cellData));
                row.appendChild(cell);
            });

            tableBody.appendChild(row);
        });

        table.appendChild(tableBody);
        document.body.appendChild(table);
    }
    <% final = [] %>
    <% @messages.each do |message| %>
    <% merge = [] %>
    <% merge << message.user %>
    <% #merge << message.created_at %>
    <% unless message.message == nil %>
    <% merge << message.message %>
    <% end %>
    <% final << merge %>
    <% end %>

    createTable(<%= final %>);
</script>


</body>
</html>